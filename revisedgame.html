<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Treasure Hunt - Mobile Friendly</title>
<style>
body {
    font-family: Arial, sans-serif;
    text-align: center;
    background-color: #f5deb3;
    color: #333;
    margin: 0;
    padding: 0;
}
h1 { margin: 15px 0; font-size: 2em; }
#instructions {
    margin: 15px auto;
    max-width: 95%;
    padding: 12px;
    background: #fff8dc;
    border: 2px solid #8b5a2b;
    border-radius: 10px;
}
#game-board {
    display: grid;
    grid-gap: 5px;
    justify-content: center;
    margin: 15px auto;
    border: 8px solid #8b5a2b;
    border-radius: 12px;
    background-color: #d2b48c;
    padding: 5px;
    box-shadow: inset 0 0 10px #5c3a1e;
    max-width: 95vw;
}
.cell {
    background-color: #8b4513;
    display: flex; 
    align-items: center; 
    justify-content: center;
    font-size: 5vw;
    cursor: pointer;
    border-radius: 8px;
    color: white;
    transition: transform 0.2s, box-shadow 0.2s;
    aspect-ratio: 1/1;
}
.cell:hover { transform: scale(1.05); box-shadow: 0px 0px 8px #000; }
.cell.found { background-color: #228b22; }
.cell.bomb { background-color: #b22222; }
#hud {
    margin-top: 10px; 
    font-size: 4vw;
    white-space: pre-line;
    background: rgba(255,255,255,0.9);
    display: inline-block;
    padding: 5px 10px;
    border-radius: 8px;
    border: 2px solid #8b5a2b;
}
#hint { 
    margin-top: 8px; 
    font-size: 3.8vw; 
    font-weight: bold; 
}
button {
    padding: 10px 20px;
    margin: 10px;
    font-size: 5vw;
    cursor: pointer;
    border: none;
    border-radius: 8px;
    background-color: #deb887;
    border: 2px solid #8b5a2b;
    transition: transform 0.2s, background 0.2s;
}
button:hover { background-color: #f2c48d; transform: scale(1.05); }
@media(min-width: 600px) {
    .cell { font-size: 28px; }
    #hud { font-size: 18px; }
    #hint { font-size: 16px; }
    button { font-size: 16px; padding: 10px 15px; }
}
</style>
</head>
<body>
<h1>üè¥‚Äç‚ò†Ô∏è Treasure Hunt</h1>

<div id="instructions">
<p><b>How to Play:</b></p>
<ul style="text-align:left; display:inline-block;">
<li>Click tiles to find treasures üí∞.</li>
<li>Avoid bombs üí£ (they cost chances!).</li>
<li>Each treasure has its own <b>fun hint</b> (riddle, math, or directions).</li>
<li>Limited chances per level; use them wisely!</li>
<li>Find all treasures to move to the next level.</li>
<li>100 levels ‚Äì can you beat them all?</li>
</ul>
</div>

<div id="game-board"></div>
<div id="hud"></div>
<div id="hint"></div>
<button id="restart" style="display:none;">Restart Level</button>

<!-- Sound Effects -->
<audio id="sound-treasure" src="https://www.soundjay.com/misc/sounds/bell-ringing-05.mp3"></audio>
<audio id="sound-bomb" src="https://www.soundjay.com/button/sounds/button-10.mp3"></audio>
<audio id="sound-wrong" src="https://www.soundjay.com/button/sounds/button-16.mp3"></audio>
<audio id="sound-win" src="https://www.soundjay.com/misc/sounds/bell-ringing-04.mp3"></audio>
<audio id="sound-lose" src="https://www.soundjay.com/button/sounds/button-4.mp3"></audio>

<script>
let gridSize, chances, treasuresCount, bombsCount;
let treasures = [], bombs = [], treasureHints = [];
let foundCount = 0;
let score = 0;
let level = 1;

const board = document.getElementById('game-board');
const hud = document.getElementById('hud');
const hintBox = document.getElementById('hint');
const restartBtn = document.getElementById('restart');

// Sounds
const sTreasure = document.getElementById('sound-treasure');
const sBomb = document.getElementById('sound-bomb');
const sWrong = document.getElementById('sound-wrong');
const sWin = document.getElementById('sound-win');
const sLose = document.getElementById('sound-lose');

function setupGame() {
    gridSize = Math.min(5 + Math.floor(level / 5), 25);
    treasuresCount = 2 + Math.floor(level / 10);
    bombsCount = Math.floor(level / 3);
    chances = Math.max(3, 7 - Math.floor(level / 15));
}

function assignTreasureHints() {
    treasureHints = treasures.map(t => {
        let row = Math.floor(t / gridSize);
        let col = t % gridSize;
        let type = Math.floor(Math.random() * 3);

        if (type === 0) {
            if (row < gridSize/2 && col < gridSize/2) return "Top-left lands hide a chest‚Ä¶";
            if (row < gridSize/2 && col >= gridSize/2) return "Top-right shadows whisper‚Ä¶";
            if (row >= gridSize/2 && col < gridSize/2) return "Bottom-left sands glitter‚Ä¶";
            return "Bottom-right shadows hold a secret‚Ä¶";
        } else if (type === 1) {
            return `Try row ${row+1}, col ${col+1} if you dare!`;
        } else {
            let riddles = [
                "Closer to the heart than the edge.",
                "Not too high, not too low‚Ä¶ somewhere in between.",
                "Corners are a thief‚Äôs best friend‚Ä¶ maybe mine too.",
                "Check the middle grounds for surprises."
            ];
            return riddles[Math.floor(Math.random() * riddles.length)];
        }
    });
}

function startGame() {
    setupGame();
    board.innerHTML = '';
    hud.innerHTML = '';
    hintBox.textContent = '';
    foundCount = 0;

    let totalCells = gridSize * gridSize;
    let allCells = Array.from({length: totalCells}, (_, i) => i);
    treasures = allCells.sort(() => 0.5 - Math.random()).slice(0, treasuresCount);
    bombs = allCells.filter(i => !treasures.includes(i))
                    .sort(() => 0.5 - Math.random()).slice(0, bombsCount);

    assignTreasureHints();

    board.style.gridTemplateColumns = `repeat(${gridSize}, 1fr)`;

    for (let i = 0; i < totalCells; i++) {
        const cell = document.createElement('div');
        cell.classList.add('cell');
        cell.dataset.index = i;
        cell.addEventListener('click', () => handleClick(cell, i));
        board.appendChild(cell);
    }

    updateHUD();
    restartBtn.style.display = 'none';
    showAllTreasureHints();
}

function handleClick(cell, index) {
    if (cell.classList.contains('found') || cell.classList.contains('bomb') || chances <= 0) return;

    if (treasures.includes(index)) {
        cell.textContent = 'üí∞';
        cell.classList.add('found');
        foundCount++;
        score += 100 * level;
        sTreasure.play();
        if (foundCount === treasuresCount) return nextLevel();
    } else if (bombs.includes(index)) {
        cell.textContent = 'üí£';
        cell.classList.add('bomb');
        chances -= 2;
        score -= 50;
        sBomb.play();
    } else {
        cell.textContent = '‚ùå';
        chances--;
        score -= 10;
        sWrong.play();
    }

    updateHUD();
    if (chances <= 0) gameOver();
}

function showAllTreasureHints() {
    let text = treasureHints.map((h, i) => `üí° Treasure #${i+1}: ${h}`).join("\n");
    hintBox.textContent = text;
}

function updateHUD() {
    hud.textContent = `‚≠ê Level: ${level}/100 | ‚ù§Ô∏è Chances: ${chances} | üíØ Score: ${score}`;
}

function nextLevel() {
    sWin.play();
    hud.textContent = `üéâ You cleared Level ${level}! Score: ${score}`;
    if (level < 100) {
        level++;
        setTimeout(startGame, 2500);
    } else {
        hud.textContent = `üèÜ Congratulations! You beat all 100 levels! Final Score: ${score}`;
    }
}

function gameOver() {
    sLose.play();
    hud.textContent += `\nüíÄ Game Over! Final Score: ${score}`;
    restartBtn.style.display = 'inline-block';
}

restartBtn.addEventListener('click', startGame);

startGame();
</script>
</body>
</html>
